@if (userInfo() !== undefined && userIconSVG !== "") {

<hlm-tabs
    tab="profile"
    class="mx-auto mt-32 flex w-[100rem] max-w-3xl flex-row space-x-2"
    orientation="vertical"
>
    <hlm-tabs-list orientation="vertical" aria-label="tabs example">
        <button class="w-full" hlmTabsTrigger="profile">User config</button>
        <button class="w-full" hlmTabsTrigger="password">Password</button>
        <button class="w-full" hlmTabsTrigger="danger">Danger Zone</button>
    </hlm-tabs-list>
    <div hlmTabsContent="profile" class="w-full">
        <section brnCard>
            <div class="group flex cursor-pointer justify-center" tabindex="0">
                <brn-popover sideOffset="5" closeDelay="100">
                    <button
                        [innerHTML]="this.sanitizer.bypassSecurityTrustHtml(chosenIcon()?.svg ?? '')"
                        class="aspect-square h-40 w-40 rounded-full bg-white p-5"
                        id="edit-profile"
                        variant="outline"
                        brnPopoverTrigger
                        hlmBtn
                        tabindex="0"
                        type="button"
                    ></button>
                    <div
                        hlmPopoverContent
                        class="grid w-80 gap-4"
                        *brnPopoverContent="let ctx"
                    >
                        <div class="space-y-2">
                            <h4 class="font-medium leading-none">User icon</h4>
                        </div>
                        <app-icon-picker
                            [icons]="this.allIcons ?? []"
                            [columns]="4"
                            (selectedIconChange)="this.chosenIcon.set($event)"
                        ></app-icon-picker>
                    </div>
                </brn-popover>
            </div>

            <div class="flex items-center justify-center space-y-1.5 p-6">
                <h3>
                    <span class="text-lg font-bold leading-none tracking-tight"
                        >{{userInfo()?.name}}</span
                    >
                    <span> | </span>
                    <span>&#64;</span>
                    <span
                        class="text-lg font-semibold leading-none tracking-tight"
                        >{{userInfo()?.username}}</span
                    >
                </h3>
            </div>
            <p hlmCardContent>
                <label class="my-4 block" hlmLabel>
                    Name
                    <input
                        class="mt-1.5 w-full"
                        value=""
                        [placeholder]="userInfo()?.name"
                        hlmInput
                        [formControl]="user.controls.name"
                    />
                </label>
                <label class="my-4 block" hlmLabel>
                    Username
                    <input
                        class="mt-1.5 w-full"
                        [placeholder]="userInfo()?.username"
                        hlmInput
                        [formControl]="user.controls.username"
                    />
                </label>
                <label class="my-4 block" hlmLabel>
                    Email
                    <input
                        class="mt-1.5 w-full"
                        [placeholder]="userInfo()?.email"
                        hlmInput
                        [formControl]="user.controls.email"
                    />
                </label>
            </p>
            <div hlmCardFooter class="flex justify-center">
                <hlm-dialog>
                    <button id="edit-profile" brnDialogTrigger hlmBtn>
                        Save Changes
                    </button>
                    <hlm-dialog-content
                        class="sm:max-w-[425px]"
                        *brnDialogContent="let ctx"
                    >
                        <hlm-dialog-header>
                            <h3 hlmDialogTitle>Edit Profile</h3>
                            <p hlmDialogDescription>
                                Enter your password to confirm your changes.
                            </p>
                        </hlm-dialog-header>
                        <div class="grid gap-4 py-4">
                            <div class="grid grid-cols-4 items-center gap-4">
                                <label
                                    hlmLabel
                                    for="username"
                                    class="text-right"
                                    >Password</label
                                >
                                <input
                                    hlmInput
                                    id="userPassword"
                                    value=""
                                    type="password"
                                    placeholder="*************"
                                    class="col-span-3"
                                    [formControl]="user.controls.oldPassword"
                                />
                            </div>
                        </div>
                        <hlm-dialog-footer>
                            <button hlmBtn (click)="onSubmit()" type="submit">
                                Save changes
                            </button>
                        </hlm-dialog-footer>
                    </hlm-dialog-content>
                </hlm-dialog>
                <!-- <button type="submit" hlmBtn>Save Changes</button> -->
            </div>
        </section>
    </div>
    <div hlmTabsContent="password">
        <section hlmCard>
            <div hlmCardHeader>
                <h3 hlmCardTitle>Password</h3>
                <p hlmCardDescription>
                    Change your password here. After saving, you'll be logged
                    out.
                </p>
            </div>
            <p hlmCardContent>
                <label class="my-4 block" hlmLabel>
                    Old Password
                    <input
                        class="mt-1.5 w-full"
                        id="oldPassword"
                        type="password"
                        hlmInput
                        [formControl]="changePasasword.controls.oldPassword"
                    />
                </label>
                <label class="my-4 block" hlmLabel>
                    New Password
                    <input
                        class="mt-1.5 w-full"
                        id="newPassword"
                        type="password"
                        hlmInput
                        [formControl]="changePasasword.controls.password"
                    />
                </label>
            </p>
            <div hlmCardFooter>
                <button (click)="this.changePassword()" hlmBtn>
                    Save Password
                </button>
            </div>
        </section>
    </div>
    <div hlmTabsContent="danger">
        <section hlmCard>
            <div hlmCardHeader>
                <h3 hlmCardTitle>Delete Account</h3>
                <p hlmCardDescription>
                    Are you sure you want to delete your account? You cannot
                    undo this action.
                </p>
            </div>
            <div hlmCardFooter>
                <button
                    variant="destructive"
                    (click)="this.deleteAccount()"
                    hlmBtn
                >
                    Delete Account
                </button>
            </div>
        </section>
    </div>
</hlm-tabs>
} @else {
<div class="mt-32 flex h-full w-full items-center justify-center gap-5">
    <hlm-spinner />
    <label for="">Loading...</label>
</div>
}
