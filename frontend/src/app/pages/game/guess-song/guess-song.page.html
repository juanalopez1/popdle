@if (this.gameInfo()) {
<header
    class="my-5 h-48 w-full overflow-hidden rounded-2xl bg-cover bg-center"
    style="background-image: url({{ this.gameInfo()!.album!.images?.[0]?.url }});"
>
    <div
        class="flex h-full w-full flex-row justify-between gap-6 p-6 backdrop-blur-2xl"
    >
        <!-- TODO: Get artist image, not album image. -->
        <img
            [src]="this.gameInfo()!.album?.images?.[0]?.url"
            alt=""
            class="aspect-square h-full rounded-xl shadow"
        />
        <div class="flex w-full flex-col justify-center gap-4">
            <div
                class="h-16 w-full rounded-xl bg-muted/80 shadow grayscale backdrop-blur"
            ></div>
            <span class="text-3xl drop-shadow"
                >By {{ this.artistsString() }}</span
            >
        </div>
    </div>
</header>
<section class="my-5 mb-20 grid grid-cols-1 gap-4 px-6">
    @for (attempt of this.gameInfo()!.attempts; track
    attempt.guessedTrackSpotifyId) {
    <article
        class="xl h-48 w-full overflow-hidden rounded-2xl bg-cover bg-center"
        style="background-image: url({{ attempt.guessedTrackAlbumImages[0].url }});"
    >
    <!--TODO: Make this pretty and allow user to submit guess.-->
        <div
            class="flex h-full w-full flex-row justify-between gap-6 p-6 backdrop-blur bg-black/30 bg-blend-multiply"
        >
            <div class="relative aspect-square h-full">
                <img
                    [src]="attempt.guessedTrackAlbumImages[0].url"
                    alt=""
                    class="aspect-square h-full rounded-xl shadow"
                />
                <div
                    class="absolute bottom-2 right-2 z-10 flex h-5 w-5 items-center justify-center rounded-full"
                    [ngClass]="{
                        'bg-green-500': attempt.isCorrectAlbum,
                        'bg-red-500': !attempt.isCorrectAlbum,
                    }"
                >
                    @if (attempt.isCorrectAlbum) {
                    <hlm-icon name="lucideCheck" size="sm"></hlm-icon>
                    } @else {

                    <hlm-icon name="lucideX" size="sm"></hlm-icon>
                    }
                </div>
            </div>
            <div class="flex w-full flex-col justify-center gap-4">
                <h3
                    class="flex w-full flex-row flex-wrap gap-2 font-mono text-3xl"
                >
                    @for (char of attempt.guessedTrackNameHint; track $index) {
                    <span
                        class="w-[2ch] rounded-md border p-2 text-center drop-shadow"
                        [ngClass]="{
                            'bg-emerald-500': char !== '_',
                            'bg-slate-500': char === '_'
                        }"
                        >{{
                        attempt.guessedTrackName[$index].toUpperCase()}}</span
                    >
                    }
                </h3>
                <span class="text-3xl drop-shadow">
                    From {{ attempt.guessedTrackAlbumName }}</span
                >
            </div>
        </div>
    </article>
    }
</section>
}
