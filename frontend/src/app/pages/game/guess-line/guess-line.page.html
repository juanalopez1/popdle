@if (this.gameInfo()) {
<div
    class="mx-auto my-5 mb-[25dvh] flex w-full flex-col items-center gap-8 px-4"
>
    <section class="w-fit min-w-[50%] text-lg">
        <span class="text-sm">
            {{ this.dict().guessLineOf(this.gameInfo()!.snippetLength) }}
        </span>
        <ul class="w-full">
            <app-track-list-item
                [readonly]="true"
                [track]="this.gameInfo()!.track"
            ></app-track-list-item>
        </ul>
    </section>
    <form class="justify flex w-full flex-col items-center gap-5">
        @for (attempt of this.attempts; track $index) { @if (this.hint($index))
        {
        <app-guess-line-wordle-text
            [text]="this.hint($index)!.guessedLine"
            [hintString]="this.hint($index)!.snippetHint"
            class="text-4xl"
        >
        </app-guess-line-wordle-text>
        } @else {
        <div
            [ngClass]="{
                'w-96': true,
            }"
        >
            <input
                class="w-full"
                type="text"
                [disabled]="!this.isCurrentAttempt($index) || this.hasEnded()"
                [name]="'attempt-' + $index"
                (keydown)="$event.key === 'Enter' ? this.submitAttempt() : ''"
                hlmInput
                [maxlength]="this.gameInfo()!.snippetLength"
                [(ngModel)]="this.attempts[$index]"
            />
            <p
                [ngClass]="{
                    'invisible': !this.isCurrentAttempt($index),
                }"
            >
                @if (this.hasWon()) {
                <span>{{ this.dict().notEveryAttempt }}</span>
                } @else {
                <span>
                    {{ this.attempts[$index].length }} / {{
                    this.gameInfo()!.snippetLength }}
                </span>
                }
            </p>
        </div>
        } }
    </form>
    @if (this.hasEnded()) {
    <div class="mt-5 flex w-full flex-col items-center gap-5">
        @if (this.hasWon()) {
        <h1
            class="mx-auto bg-gradient-to-r from-purple-500 via-fuchsia-500 via-[30%] to-orange-500 to-[calc(100%+15rem)] bg-clip-text text-6xl font-extrabold text-transparent"
        >
            {{ this.dict().wonTitle }}
        </h1>
        } @if (this.hasLost()) {
        <h1 class="mx-auto text-6xl font-extrabold">
            {{ this.dict().lostTitle }}
        </h1>
        }
        <iframe
            class="rounded-2xl"
            [src]="this.sanitizer.bypassSecurityTrustResourceUrl(this.embedSrc()!)"
            width="100%"
            height="352"
            frameborder="0"
            allowfullscreen=""
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            loading="lazy"
        ></iframe>
        <div class="mt-2 flex w-fit justify-between gap-20">
            <a
                [href]="this.router.createLink('/app/leaderboards')"
                hlmBtn
                variant="ghost"
                class="text-xl font-bold"
                >{{ this.dict().seeFriends }}</a
            >
            <a
                [href]="this.router.createLink('/app/game')"
                hlmBtn
                variant="ghost"
                class="text-xl font-bold"
                >{{ this.dict().playAgain }}</a
            >
        </div>
    </div>
    }
</div>
}
